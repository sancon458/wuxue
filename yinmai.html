<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>隐脉查询系统</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <style>
        .dropdown-menu {
            max-height: 200px;
            overflow-y: auto;
        }
        /* 添加样式以美化段落 */
        .mb-3 p {
            margin-bottom: 0.5rem;
        }
        /* 新增样式以美化玄络展示 */
        .meridian-link {
            border: 1px solid #ccc;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0.25rem;
        }
        .meridian-link h6 {
            margin-bottom: 0.5rem;
            font-weight: bold;
        }
        .meridian-link p {
            margin-left: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="page-header text-center d-flex justify-content-between align-items-center">
            <h1>隐脉查询系统</h1>
            <span class="option-btn" onclick="toggleOptionMenu(event)">☰</span>
            <div class="option-menu" id="optionMenu">
                <a href="index.html">武学查询</a>
                <a href="yinmai.html">隐脉查询</a>
            </div>
        </div>

        <div class="dropdown mb-3">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="mindItemDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                选择玄络图
            </button>
            <ul class="dropdown-menu" aria-labelledby="mindItemDropdown" id="mindItemDropdownMenu">
            </ul>
        </div>

        <div id="meridianLinkTabs" class="d-none">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="zhengji-tab" data-bs-toggle="tab" data-bs-target="#zhengji" type="button" role="tab" aria-controls="zhengji" aria-selected="true">正基</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="zhongdan-tab" data-bs-toggle="tab" data-bs-target="#zhongdan" type="button" role="tab" aria-controls="zhongdan" aria-selected="false">中丹</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="tongyuan-tab" data-bs-toggle="tab" data-bs-target="#tongyuan" type="button" role="tab" aria-controls="tongyuan" aria-selected="false">通元</button>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="zhengji" role="tabpanel" aria-labelledby="zhengji-tab"></div>
                <div class="tab-pane fade" id="zhongdan" role="tabpanel" aria-labelledby="zhongdan-tab"></div>
                <div class="tab-pane fade" id="tongyuan" role="tabpanel" aria-labelledby="tongyuan-tab"></div>
            </div>
        </div>

        <div id="meridianMap" class="row">
            <div class="loading">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p>加载数据中...</p>
            </div>
        </div>

        <script>
            function toggleOptionMenu(event) {
                const menu = document.getElementById('optionMenu');
                const buttonRect = event.target.getBoundingClientRect();
                menu.style.left = `${buttonRect.right - menu.offsetWidth}px`;
                menu.style.top = `${buttonRect.bottom}px`;
                menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
            }

            // 手动初始化Bootstrap的下拉组件
            document.addEventListener('DOMContentLoaded', function () {
                var dropdownElementList = [].slice.call(document.querySelectorAll('.dropdown-toggle'))
                dropdownElementList.map(function (dropdownToggleEl) {
                    return new bootstrap.Dropdown(dropdownToggleEl)
                })
            });
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <script type="module" src="js/modules/yinmai/yinmai.js"></script>
    </div>
</body>
</html>